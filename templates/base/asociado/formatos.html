{% extends 'index.html' %}
{% load static %}

{% block breadcrumb %}
    <li class="breadcrumb-item"><a href="{% url 'dashboard' %}">Inicio</a></li>
    <li class="breadcrumb-item"><a href="{% url 'informacion:informacion' %}">Información</a></li>
    <li class="breadcrumb-item"><a href="{% url 'asociado:asociado' %}">Asociados</a></li>
    <li class="breadcrumb-item active" aria-current="page">Detalle Asociado</li>
    <li class="breadcrumb-item active" aria-current="page">{{ query.nombre }} {{ query.apellido }} - {{query.numDocumento}}</li>
{% endblock breadcrumb %}

{% block title%}
    Asociado
{% endblock title %}    

{% block contenidoPagina %}
    
    {% include 'estructura/asociado/navbar.html' %}

    <div class="modal fade" id="creacion" role="dialog">
        <!-- En este div se visualiza la informacion para la creacion de un nuevo registro de entrada -->
    </div>

    {% comment %} Scripts de funciones para realizar documentos PDF{% endcomment %}
    <script src="{% static 'js/formatos.js' %}"></script>       
    <script src="{% static 'lib/jspdf/1.3.4/jspdf.min.js' %}"></script>

    <div class="container-fluid">
        <div class="row">
            <div class="col-12 d-flex justify-content-end mt-4 mb-4">
                <div class="btn-group" role="group" aria-label="Basic example">
                    <a href="{% url 'asociado:asociado' %}" class="btn btn-primary">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-left" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0"/>
                        </svg>
                    </a>  
                </div>
            </div>
        </div> 
    </div>

    {% if mensaje %}

    {% else %}
        <div class="container-fluid">
            <div class="row justify-content-center g-4">

                <!-- Card 1 -->
                <div class="col-12 col-md-6 col-xl-4 col-xxl-3">
                    <div class="card card-modern text-center shadow-sm border-0 h-100">
                        <div class="card-body p-4 d-flex flex-column align-items-center justify-content-between">
                        <div>
                            <div class="icon-wrapper bg-danger bg-opacity-10 text-danger mb-3">
                                RA
                            </div>
                            <h5 class="card-title fw-semibold text-dark mb-3">
                                Registro Vinculación y Actualización de Datos
                            </h5>
                        </div>
                        <button 
                            class="btn btn-danger rounded-3 px-4 py-2 shadow-sm fw-semibold d-flex align-items-center gap-2" 
                            onclick="abrir_modal_creacion('{% url 'asociado:modalFormato' pkAsociado 1 %}')">
                            <i class="bi bi-filetype-pdf fs-5"></i>
                            Descargar
                        </button>
                        </div>
                    </div>
                </div>

                <!-- Card 2 -->
                <div class="col-12 col-md-6 col-xl-4 col-xxl-3">
                    <div class="card card-modern text-center shadow-sm border-0 h-100">
                        <div class="card-body p-4 d-flex flex-column align-items-center justify-content-between">
                        <div>
                            <div class="icon-wrapper bg-danger bg-opacity-10 text-danger mb-3">
                                RSE
                            </div>
                            <h5 class="card-title fw-semibold text-dark mb-3">
                                Registro Actualización Servicios Exequiales
                            </h5>
                        </div>
                        <button type="button" class="btn btn-danger rounded-3 px-4 py-2 shadow-sm fw-semibold d-flex align-items-center gap-2"
                            onclick="llamarPDF(2,'{% static 'img/Formato_Servicios_Exequiales_2025_page_0001.jpg'%}', {{pkAsociado}}, 'RSE', {}, this)">
                            <span id="btnText">Descargar</span>
                            <div class="spinner-border spinner-border-sm text-light d-none btnSpinner" role="status"></div>
                        </button>
                        </div>
                    </div>
                </div>

                <!-- Card 3 -->
                <div class="col-12 col-md-6 col-xl-4 col-xxl-3">
                    <div class="card card-modern text-center shadow-sm border-0 h-100">
                        <div class="card-body p-4 d-flex flex-column align-items-center justify-content-between">
                        <div>
                            <div class="icon-wrapper bg-danger bg-opacity-10 text-danger mb-3">
                                SAE
                            </div>
                            <h5 class="card-title fw-semibold text-dark mb-3">
                                Formato Solicitud Bienestar Social
                            </h5>
                        </div>
                        <button 
                            class="btn btn-danger rounded-3 px-4 py-2 shadow-sm fw-semibold d-flex align-items-center gap-2" 
                            onclick="abrir_modal_creacion('{% url 'asociado:modalFormato' pkAsociado 3 %}')">
                            <i class="bi bi-filetype-pdf fs-5"></i>
                            Descargar
                        </button>
                        </div>
                    </div>
                </div>

                <!-- Card 4 -->
                <div class="col-12 col-md-6 col-xl-4 col-xxl-3">
                    <div class="card card-modern text-center shadow-sm border-0 h-100">
                        <div class="card-body p-4 d-flex flex-column align-items-center justify-content-between">
                        <div>
                            <div class="icon-wrapper bg-danger bg-opacity-10 text-danger mb-3">
                                FEP
                            </div>
                            <h5 class="card-title fw-semibold text-dark mb-3">
                                Formato Extracto de Pago Mensual
                            </h5>
                        </div>
                        <button 
                            class="btn btn-danger rounded-3 px-4 py-2 shadow-sm fw-semibold d-flex align-items-center gap-2" 
                            onclick="abrir_modal_creacion('{% url 'asociado:modalFormato' pkAsociado 4 %}')">
                            <i class="bi bi-filetype-pdf fs-5"></i>
                            Descargar
                        </button>
                        </div>
                    </div>
                </div>

                <!-- Card 5 -->
                <div class="col-12 col-md-6 col-xl-4 col-xxl-3">
                    <div class="card card-modern text-center shadow-sm border-0 h-100">
                        <div class="card-body p-4 d-flex flex-column align-items-center justify-content-between">
                        <div>
                            <div class="icon-wrapper bg-danger bg-opacity-10 text-danger mb-3">
                                FSC
                            </div>
                            <h5 class="card-title fw-semibold text-dark mb-3">
                                Formato Solicitud Crédito
                            </h5>
                        </div>
                        <button 
                            class="btn btn-danger rounded-3 px-4 py-2 shadow-sm fw-semibold d-flex align-items-center gap-2" 
                            onclick="abrir_modal_creacion('{% url 'asociado:modalFormato' pkAsociado 5 %}')">
                            <i class="bi bi-filetype-pdf fs-5"></i>
                            Descargar
                        </button>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    {% endif %}

{% endblock contenidoPagina %}

{% block extrajs %}
    <script src="{% static 'js/funcionesFormatos.js' %}"></script>

    <script type="text/javascript">

        var $ = jQuery.noConflict()
        function abrir_modal_creacion(url){
            $('#creacion').load(url, function(){
                $(this).modal('show');
            });
        }
    </script>
    
{% endblock extrajs %}