<div class="modal-dialog modal-lg" role="document">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="exampleModalLabel">Crear Beneficiario para:</h1>
          <h2 class="modal-title fs-5" id="exampleModalLabel" style="margin-left: 8px;">
              {{ query.nombre }} {{ query.apellido }}
          </h2>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            <form action="{% url 'asociado:crearBeneficiario' pkAsociado %}" method="post">

                <div class="col-sm-2">
                    <div class="btn-group" role="group" aria-label="Basic example">
                    </div>
                </div>
                {% csrf_token %}
                <div class="form-group mb-3">
                  {{ form.nombre.label_tag }}
                  {{ form.nombre }}
                </div>
                <div class="form-group mb-3">
                    {{ form.apellido.label_tag }}
                    {{ form.apellido }}
                </div>
                <div class="form-group mb-3">
                    {{ form.tipoDocumento.label_tag }}
                    {{ form.tipoDocumento }}
                </div>
                <div class="form-group mb-3">
                    {{ form.numDocumento.label_tag }}
                    {{ form.numDocumento }}
                </div>
                <div class="form-group mb-3">
                    {{ form.fechaNacimiento.label_tag }}
                    {{ form.fechaNacimiento }}
                </div>
                <div class="form-group mb-3">
                    {{ form.parentesco.label_tag }}
                    {{ form.parentesco }}
                </div>
                <div class="form-group mb-3">
                    {{ form.paisRepatriacion.label_tag }}
                    {{ form.paisRepatriacion }}
                </div>
                <div id="id_fechaRepatriacion_div"class="form-group d-none mb-3">
                    {{ form.fechaRepatriacion.label_tag }}
                    <input id="id_fechaRepatriacion" name="fechaRepatriacion" type="date" class="form-control">
                </div>
                <div class="form-group mb-3">
                    {{ form.fechaIngreso.label_tag }}
                    {{ form.fechaIngreso }}
                </div>
                <button type="submit" class="btn btn-primary"><i class="fa-solid fa-floppy-disk"></i></button>
            </form>
        </div>
      </div>
    </div>
  </div>

  <script>
    $('#creacion').on('shown.bs.modal', function () {
      const paisRepatriacion = document.querySelector('#id_paisRepatriacion');
      const fechaRepatriacion = document.querySelector('#id_fechaRepatriacion_div');
      const fechaRepatriacionInput = document.querySelector('#id_fechaRepatriacion');
  
      if (!paisRepatriacion || !fechaRepatriacion) {
          console.error('No se encontraron los elementos en el modal.');
          return;
      }
  
      paisRepatriacion.addEventListener('change', function () {
          if (paisRepatriacion.value) {
            fechaRepatriacion.classList.remove('d-none');
            fechaRepatriacionInput.setAttribute('required', 'required');
          } else {
            fechaRepatriacion.classList.add('d-none');
            fechaRepatriacionInput.removeAttribute('required');
            fechaRepatriacion.value = '';
          }
      });
  });
  
</script>